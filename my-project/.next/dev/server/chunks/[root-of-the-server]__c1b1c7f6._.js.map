{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/gavrilbogdan/Documents/GitHub/CleanTM/marian/Untitled/my-project/lib/prisma.js"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\n\n// Create a single Prisma Client instance\nconst prisma = global.prisma || new PrismaClient();\n\n// Prevent creating multiple instances during development (hot reloads)\nif (process.env.NODE_ENV === \"development\") global.prisma = prisma;\n\nexport default prisma;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,yCAAyC;AACzC,MAAM,SAAS,yDAAO,MAAM,IAAI,IAAI,6IAAY;AAEhD,uEAAuE;AACvE,wCAA4C,yDAAO,MAAM,GAAG;uCAE7C"}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///Users/gavrilbogdan/Documents/GitHub/CleanTM/marian/Untitled/my-project/app/api/tasks/addPoints/route.js"],"sourcesContent":["// /app/api/tasks/addPoints/route.js\nimport { NextResponse } from \"next/server\";\nimport prisma from \"@/lib/prisma\";\n\nexport async function POST(req) {\n  try {\n    const { points } = await req.json();\n\n    // Get the token from cookies\n    const cookieStore = req.headers.get(\"cookie\") || \"\";\n    const tokenMatch = cookieStore.match(/token=([^;]+)/);\n    if (!tokenMatch)\n      return NextResponse.json({ error: \"Not authenticated\" }, { status: 401 });\n    const token = tokenMatch[1];\n\n    // Find user by token\n    const user = await prisma.user.findFirst({ where: { token } });\n    if (!user)\n      return NextResponse.json({ error: \"User not found\" }, { status: 404 });\n\n    // Add points\n    const updatedUser = await prisma.user.update({\n      where: { id: user.id },\n      data: { points: (user.points || 0) + points },\n    });\n\n    return NextResponse.json({\n      user: { email: updatedUser.email, points: updatedUser.points },\n    });\n  } catch (error) {\n    return NextResponse.json(\n      { error: \"Something went wrong\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":"AAAA,oCAAoC;;;;;AACpC;AACA;;;AAEO,eAAe,KAAK,GAAG;IAC5B,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,IAAI,IAAI;QAEjC,6BAA6B;QAC7B,MAAM,cAAc,IAAI,OAAO,CAAC,GAAG,CAAC,aAAa;QACjD,MAAM,aAAa,YAAY,KAAK,CAAC;QACrC,IAAI,CAAC,YACH,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAoB,GAAG;YAAE,QAAQ;QAAI;QACzE,MAAM,QAAQ,UAAU,CAAC,EAAE;QAE3B,qBAAqB;QACrB,MAAM,OAAO,MAAM,0HAAM,CAAC,IAAI,CAAC,SAAS,CAAC;YAAE,OAAO;gBAAE;YAAM;QAAE;QAC5D,IAAI,CAAC,MACH,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAiB,GAAG;YAAE,QAAQ;QAAI;QAEtE,aAAa;QACb,MAAM,cAAc,MAAM,0HAAM,CAAC,IAAI,CAAC,MAAM,CAAC;YAC3C,OAAO;gBAAE,IAAI,KAAK,EAAE;YAAC;YACrB,MAAM;gBAAE,QAAQ,CAAC,KAAK,MAAM,IAAI,CAAC,IAAI;YAAO;QAC9C;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,MAAM;gBAAE,OAAO,YAAY,KAAK;gBAAE,QAAQ,YAAY,MAAM;YAAC;QAC/D;IACF,EAAE,OAAO,OAAO;QACd,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAuB,GAChC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}