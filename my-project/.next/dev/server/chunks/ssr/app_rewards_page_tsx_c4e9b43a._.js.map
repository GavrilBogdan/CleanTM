{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/gavrilbogdan/Documents/GitHub/CleanTM/marian/Untitled/my-project/app/rewards/page.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\n\nexport default function RewardsPage() {\n  const [user, setUser] = useState(null);\n  const [items, setItems] = useState([\n    { id: 1, name: \"Coffee Coupon\", cost: 50 },\n    { id: 2, name: \"Free Flower Bouquet\", cost: 200 },\n    { id: 3, name: \"Discount 10%\", cost: 120 },\n  ]);\n  const [message, setMessage] = useState(\"\");\n\n  // Fetch user (points)\n  useEffect(() => {\n    const fetchUser = async () => {\n      const res = await fetch(\"/api/auth/me\");\n      const data = await res.json();\n      if (data.user) setUser(data.user);\n    };\n    fetchUser();\n  }, []);\n\n  const buyItem = async (item) => {\n    if (!user) return;\n\n    const res = await fetch(\"/api/rewards/buy\", {\n      method: \"POST\",\n      body: JSON.stringify({ itemId: item.id }),\n    });\n\n    const data = await res.json();\n    if (res.ok) {\n      setMessage(`You bought ${item.name}!`);\n      setUser({ ...user, points: data.points });\n    } else {\n      setMessage(data.error);\n    }\n  };\n\n  if (!user) return <div className=\"p-6\">Loading...</div>;\n\n  return (\n    <div className=\"p-6\">\n      <h1 className=\"text-3xl font-bold mb-4\">Rewards Shop</h1>\n\n      <p className=\"mb-6 text-lg\">\n        Your Points: <strong>{user.points}</strong>\n      </p>\n\n      {message && (\n        <div className=\"mb-4 p-3 bg-yellow-200 rounded\">{message}</div>\n      )}\n\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4\">\n        {items.map((item) => (\n          <div key={item.id} className=\"p-4 border rounded-lg shadow\">\n            <h2 className=\"text-xl font-semibold\">{item.name}</h2>\n            <p className=\"mt-2\">Cost: {item.cost} points</p>\n            <button\n              onClick={() => buyItem(item)}\n              className=\"mt-4 bg-blue-600 text-white px-4 py-2 rounded\"\n              disabled={user.points < item.cost}\n            >\n              {user.points < item.cost ? \"Not enough points\" : \"Buy\"}\n            </button>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAGe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;QACjC;YAAE,IAAI;YAAG,MAAM;YAAiB,MAAM;QAAG;QACzC;YAAE,IAAI;YAAG,MAAM;YAAuB,MAAM;QAAI;QAChD;YAAE,IAAI;YAAG,MAAM;YAAgB,MAAM;QAAI;KAC1C;IACD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,sBAAsB;IACtB,IAAA,kNAAS,EAAC;QACR,MAAM,YAAY;YAChB,MAAM,MAAM,MAAM,MAAM;YACxB,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,IAAI,KAAK,IAAI,EAAE,QAAQ,KAAK,IAAI;QAClC;QACA;IACF,GAAG,EAAE;IAEL,MAAM,UAAU,OAAO;QACrB,IAAI,CAAC,MAAM;QAEX,MAAM,MAAM,MAAM,MAAM,oBAAoB;YAC1C,QAAQ;YACR,MAAM,KAAK,SAAS,CAAC;gBAAE,QAAQ,KAAK,EAAE;YAAC;QACzC;QAEA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,IAAI,IAAI,EAAE,EAAE;YACV,WAAW,CAAC,WAAW,EAAE,KAAK,IAAI,CAAC,CAAC,CAAC;YACrC,QAAQ;gBAAE,GAAG,IAAI;gBAAE,QAAQ,KAAK,MAAM;YAAC;QACzC,OAAO;YACL,WAAW,KAAK,KAAK;QACvB;IACF;IAEA,IAAI,CAAC,MAAM,qBAAO,8OAAC;QAAI,WAAU;kBAAM;;;;;;IAEvC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAA0B;;;;;;0BAExC,8OAAC;gBAAE,WAAU;;oBAAe;kCACb,8OAAC;kCAAQ,KAAK,MAAM;;;;;;;;;;;;YAGlC,yBACC,8OAAC;gBAAI,WAAU;0BAAkC;;;;;;0BAGnD,8OAAC;gBAAI,WAAU;0BACZ,MAAM,GAAG,CAAC,CAAC,qBACV,8OAAC;wBAAkB,WAAU;;0CAC3B,8OAAC;gCAAG,WAAU;0CAAyB,KAAK,IAAI;;;;;;0CAChD,8OAAC;gCAAE,WAAU;;oCAAO;oCAAO,KAAK,IAAI;oCAAC;;;;;;;0CACrC,8OAAC;gCACC,SAAS,IAAM,QAAQ;gCACvB,WAAU;gCACV,UAAU,KAAK,MAAM,GAAG,KAAK,IAAI;0CAEhC,KAAK,MAAM,GAAG,KAAK,IAAI,GAAG,sBAAsB;;;;;;;uBAR3C,KAAK,EAAE;;;;;;;;;;;;;;;;AAe3B"}}]
}