{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/gavrilbogdan/Documents/GitHub/CleanTM/marian/Untitled/my-project/components/Navbar.tsx"],"sourcesContent":["\"use client\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { useUser } from \"../app/context/UserContext\";\n\nconst Navbar = ({ className }: { className?: string }) => {\n  const [open, setOpen] = useState(false);\n  const [userMenuOpen, setUserMenuOpen] = useState(false);\n  const { user, setUser } = useUser();\n  const router = useRouter();\n  const userMenuRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      try {\n        const res = await fetch(\"/api/auth/me\");\n        if (res.ok) {\n          const data = await res.json();\n          setUser(data.user || null);\n        } else setUser(null);\n      } catch {\n        setUser(null);\n      }\n    };\n    fetchUser();\n  }, [setUser]);\n\n  // Close dropdown if clicked outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (\n        userMenuRef.current &&\n        !userMenuRef.current.contains(event.target as Node)\n      ) {\n        setUserMenuOpen(false);\n      }\n    };\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\n  }, []);\n\n  const handleScroll = (id: string) => {\n    if (id.startsWith(\"/\")) router.push(id);\n    else {\n      const el = document.getElementById(id);\n      if (el) {\n        const yOffset = -100;\n        const y = el.getBoundingClientRect().top + window.pageYOffset + yOffset;\n        window.scrollTo({ top: y, behavior: \"smooth\" });\n      }\n    }\n    setOpen(false);\n    setUserMenuOpen(false);\n  };\n\n  const handleLogout = async () => {\n    await fetch(\"/api/auth/logout\", { method: \"POST\" });\n    setUser(null);\n    router.push(\"/\");\n  };\n\n  return (\n    <div\n      className={`relative z-[9999] w-full flex justify-center ${\n        className || \"\"\n      }`}\n    >\n      <nav\n        className=\"\n          fixed top-4 w-[92%] max-w-7xl mx-auto\n          flex items-center justify-between\n          px-6 md:px-10 py-3\n          rounded-full\n          shadow-[0_0_25px_rgba(16,185,129,0.6)]\n          bg-slate-900/85\n          border border-emerald-500/40\n          backdrop-blur-2xl\n          z-[10000]\n        \"\n      >\n        {/* Logo */}\n        <div\n          onClick={() => handleScroll(\"/\")}\n          className=\"flex items-center gap-3 cursor-pointer hover:scale-105 transition-transform duration-300\"\n        >\n          <img\n            src=\"https://cdn-icons-png.flaticon.com/128/892/892930.png\"\n            alt=\"CleanTM Logo\"\n            className=\"h-9 w-9 drop-shadow-[0_0_10px_rgba(16,185,129,0.9)]\"\n          />\n          <span className=\"text-xl font-extrabold text-emerald-100 tracking-wide\">\n            CleanTM\n          </span>\n        </div>\n\n        {/* Desktop Links */}\n        <ul className=\"hidden lg:flex items-center gap-10 text-emerald-50 font-medium text-sm md:text-base\">\n          {[\n            { label: \"Home\", id: \"/\" },\n            { label: \"Map\", id: \"/Participate\" },\n            { label: \"Weekly Quests\", id: \"/task\" },\n            { label: \"Rewards\", id: \"/shop\" },\n          ].map((i) => (\n            <li\n              key={i.label}\n              onClick={() => handleScroll(i.id)}\n              className=\"\n                relative cursor-pointer group\n                transition-colors duration-300\n                text-emerald-100\n                hover:text-emerald-300\n              \"\n            >\n              {i.label}\n              <span\n                className=\"\n                  absolute left-1/2 -bottom-1 h-[2px] w-0\n                  bg-emerald-400 rounded-full\n                  group-hover:w-full\n                  group-hover:-translate-x-1/2\n                  transition-all duration-300\n                \"\n              />\n            </li>\n          ))}\n        </ul>\n\n        {/* User CTA */}\n        <div\n          className=\"hidden lg:flex items-center gap-4 relative\"\n          ref={userMenuRef}\n        >\n          {user ? (\n            <>\n              <div\n                onClick={() => setUserMenuOpen(!userMenuOpen)}\n                className=\"\n                  font-semibold text-emerald-50 cursor-pointer px-3 py-2\n                  rounded-xl\n                  bg-emerald-500/5\n                  hover:bg-emerald-500/15\n                  border border-emerald-400/30\n                  transition\n                \"\n              >\n                {user.email}\n              </div>\n\n              {/* Dropdown */}\n              {userMenuOpen && (\n                <div\n                  className=\"\n                    absolute right-0 top-12\n                    bg-slate-900/95\n                    rounded-xl shadow-2xl\n                    border border-emerald-500/30\n                    w-44 py-2 z-[10001]\n                    animate-slide-down\n                    backdrop-blur-xl\n                  \"\n                >\n                  <button\n                    onClick={() => handleScroll(\"/Dashboard\")}\n                    className=\"\n                      w-full text-left px-4 py-2\n                      text-emerald-50 text-sm\n                      hover:bg-emerald-500/10\n                      transition\n                    \"\n                  >\n                    Dashboard\n                  </button>\n                  <button\n                    onClick={() => handleScroll(\"/shop/inventory\")}\n                    className=\"\n                      w-full text-left px-4 py-2\n                      text-emerald-50 text-sm\n                      hover:bg-emerald-500/10\n                      transition\n                    \"\n                  >\n                    Inventory\n                  </button>\n                  <button\n                    onClick={handleLogout}\n                    className=\"\n                      w-full text-left px-4 py-2\n                      text-red-400 text-sm\n                      hover:bg-red-500/10\n                      transition\n                    \"\n                  >\n                    Logout\n                  </button>\n                </div>\n              )}\n            </>\n          ) : (\n            <button\n              onClick={() => handleScroll(\"/api/login\")}\n              className=\"\n                px-5 py-2 rounded-full\n                bg-emerald-500\n                text-white text-sm font-bold\n                shadow-lg shadow-emerald-500/40\n                hover:bg-emerald-400\n                hover:shadow-emerald-400/60\n                transition-all\n              \"\n            >\n              Login\n            </button>\n          )}\n        </div>\n\n        {/* Mobile Menu Button */}\n        <button\n          onClick={() => setOpen(!open)}\n          className=\"lg:hidden relative w-10 h-10 flex flex-col justify-between items-center z-[10002]\"\n        >\n          <span\n            className={`\n              block h-[3px] w-8 rounded-full\n              bg-emerald-50 shadow\n              transition-transform duration-300\n              ${open ? \"rotate-45 translate-y-3\" : \"\"}\n            `}\n          ></span>\n          <span\n            className={`\n              block h-[3px] w-8 rounded-full\n              bg-emerald-50 shadow\n              transition-opacity duration-300\n              ${open ? \"opacity-0\" : \"\"}\n            `}\n          ></span>\n          <span\n            className={`\n              block h-[3px] w-8 rounded-full\n              bg-emerald-50 shadow\n              transition-transform duration-300\n              ${open ? \"-rotate-45 -translate-y-3\" : \"\"}\n            `}\n          ></span>\n        </button>\n      </nav>\n\n      {/* Mobile Dropdown */}\n      <div\n        className={`\n          lg:hidden fixed top-[5.5rem] left-1/2 -translate-x-1/2 w-[92%] max-w-7xl px-6 py-6\n          rounded-3xl\n          bg-slate-900/95\n          backdrop-blur-2xl\n          shadow-[0_20px_40px_rgba(0,0,0,0.8)]\n          border border-emerald-500/30\n          transition-all duration-500 z-[9999]\n          ${\n            open\n              ? \"opacity-100 translate-y-0\"\n              : \"opacity-0 -translate-y-3 pointer-events-none\"\n          }\n        `}\n      >\n        <ul className=\"flex flex-col gap-5 text-base font-medium text-emerald-50\">\n          <li\n            onClick={() => handleScroll(\"/\")}\n            className=\"hover:text-emerald-300 cursor-pointer\"\n          >\n            Home\n          </li>\n          <li\n            onClick={() => handleScroll(\"/Participate\")}\n            className=\"hover:text-emerald-300 cursor-pointer\"\n          >\n            Map\n          </li>\n          <li\n            onClick={() => handleScroll(\"/task\")}\n            className=\"hover:text-emerald-300 cursor-pointer\"\n          >\n            Weekly Quests\n          </li>\n          <li\n            onClick={() => handleScroll(\"/shop\")}\n            className=\"hover:text-emerald-300 cursor-pointer\"\n          >\n            Rewards\n          </li>\n        </ul>\n\n        <div className=\"mt-6 flex flex-col gap-3\">\n          {user ? (\n            <>\n              <span className=\"text-emerald-100 font-semibold\">\n                {user.email}\n              </span>\n              <button\n                onClick={() => handleScroll(\"/Dashboard\")}\n                className=\"\n                  w-full py-3 rounded-full\n                  bg-emerald-500/10\n                  text-emerald-100 font-bold\n                  border border-emerald-400/40\n                  hover:bg-emerald-500/20\n                  transition-all shadow-md\n                \"\n              >\n                Dashboard\n              </button>\n              <button\n                onClick={() => handleScroll(\"/shop/inventory\")}\n                className=\"\n                  w-full py-3 rounded-full\n                  bg-emerald-500/10\n                  text-emerald-100 font-bold\n                  border border-emerald-400/40\n                  hover:bg-emerald-500/20\n                  transition-all shadow-md\n                \"\n              >\n                Inventory\n              </button>\n              <button\n                onClick={handleLogout}\n                className=\"\n                  w-full py-3 rounded-full\n                  bg-red-500/15\n                  text-red-200 font-bold\n                  border border-red-400/40\n                  hover:bg-red-500/30\n                  transition-all shadow-md\n                \"\n              >\n                Logout\n              </button>\n            </>\n          ) : (\n            <button\n              onClick={() => handleScroll(\"/api/login\")}\n              className=\"\n                w-full py-3 rounded-full\n                bg-emerald-500\n                text-white font-bold\n                hover:bg-emerald-400\n                transition-all shadow-lg shadow-emerald-500/50\n              \"\n            >\n              Login\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Navbar;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 393, "column": 0}, "map": {"version":3,"sources":["file:///Users/gavrilbogdan/Documents/GitHub/CleanTM/marian/Untitled/my-project/components/Footer.tsx"],"sourcesContent":["\"use client\";\nimport React from \"react\";\nimport { Facebook, Instagram, Twitter, Github } from \"lucide-react\";\n\nconst Footer = () => {\n  return (\n    <footer className=\"relative overflow-hidden bg-gray-900 text-gray-300 pt-16 pb-15 sm:pb-10 \">\n      {/* GLOW EFFECT */}\n      <div className=\"absolute top-0 left-1/2 -translate-x-1/2 w-[500px] h-[500px] bg-green-500/20 blur-[120px] rounded-full\"></div>\n\n      <div className=\"max-w-7xl mx-auto px-6 lg:px-10 relative z-10\">\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-14\">\n          {/* BRAND */}\n          <div className=\"space-y-4\">\n            <h1 className=\"text-4xl font-extrabold tracking-tight text-white drop-shadow-[0_0_12px_rgba(0,255,0,0.5)]\">\n              <span className=\"text-green-400\">Clean</span>TM\n            </h1>\n            <p className=\"text-lg text-gray-400 font-semibold\">\n              Together to make a change!\n            </p>\n            <p className=\"text-sm text-gray-500 leading-relaxed\">\n              We are building a greener future through community-driven action.\n              Track progress, earn rewards, and contribute to a cleaner world.\n            </p>\n          </div>\n\n          {/* QUICK LINKS */}\n          <div>\n            <h2 className=\"text-xl font-bold text-white mb-4 relative w-fit\">\n              Quick Links\n              <span className=\"absolute left-0 -bottom-1 w-1/2 h-[3px] bg-green-400 rounded-full\"></span>\n            </h2>\n            <ul className=\"space-y-2 font-medium\">\n              <li className=\"hover:text-green-400 transition hover:underline-animation-b w-fit cursor-pointer\">\n                Home\n              </li>\n              <li className=\"hover:text-green-400 transition hover:underline-animation-b w-fit cursor-pointer\">\n                Map\n              </li>\n              <li className=\"hover:text-green-400 transition hover:underline-animation-b w-fit cursor-pointer\">\n                Tasks\n              </li>\n              <li className=\"hover:text-green-400 transition hover:underline-animation-b w-fit cursor-pointer\">\n                Rewards\n              </li>\n            </ul>\n          </div>\n\n          {/* SOCIAL */}\n          <div>\n            <h2 className=\"text-xl font-bold text-white mb-4 relative w-fit\">\n              Follow Us\n              <span className=\"absolute left-0 -bottom-1 w-1/2 h-[3px] bg-green-400 rounded-full\"></span>\n            </h2>\n            <div className=\"flex gap-4 text-2xl\">\n              <a\n                className=\"hover:text-green-400 transition hover:bg-green-400 rounded-full p-2 hover:text-white\"\n                href=\"#\"\n              >\n                <Facebook className=\"w-6 h-6  z-50\" />\n              </a>\n              <a\n                className=\"hover:text-green-400 transition hover:bg-green-400 rounded-full p-2 hover:text-white\"\n                href=\"#\"\n              >\n                <Instagram className=\"w-6 h-6 z-50\" />\n              </a>\n              <a\n                className=\"hover:text-green-400 transition hover:bg-green-400 rounded-full p-2 hover:text-white\"\n                href=\"#\"\n              >\n                <Twitter className=\"w-6 h-6 z-50\" />\n              </a>\n              <a\n                className=\"hover:text-green-400 transition hover:bg-green-400 rounded-full p-2 hover:text-white\"\n                href=\"#\"\n              >\n                <Github className=\"w-6 h-6 z-50\" />\n              </a>\n            </div>\n          </div>\n        </div>\n\n        {/* DIVIDER */}\n        <div className=\"border-t border-white/10 mt-14 pt-6 text-center text-sm text-gray-500\">\n          ¬© {new Date().getFullYear()} CleanTM ‚Äî All rights reserved.\n        </div>\n      </div>\n    </footer>\n  );\n};\n\nexport default Footer;\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAFA;;;AAIA,MAAM,SAAS;IACb,qBACE,8OAAC;QAAO,WAAU;;0BAEhB,8OAAC;gBAAI,WAAU;;;;;;0BAEf,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CAEb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAG,WAAU;;0DACZ,8OAAC;gDAAK,WAAU;0DAAiB;;;;;;4CAAY;;;;;;;kDAE/C,8OAAC;wCAAE,WAAU;kDAAsC;;;;;;kDAGnD,8OAAC;wCAAE,WAAU;kDAAwC;;;;;;;;;;;;0CAOvD,8OAAC;;kDACC,8OAAC;wCAAG,WAAU;;4CAAmD;0DAE/D,8OAAC;gDAAK,WAAU;;;;;;;;;;;;kDAElB,8OAAC;wCAAG,WAAU;;0DACZ,8OAAC;gDAAG,WAAU;0DAAmF;;;;;;0DAGjG,8OAAC;gDAAG,WAAU;0DAAmF;;;;;;0DAGjG,8OAAC;gDAAG,WAAU;0DAAmF;;;;;;0DAGjG,8OAAC;gDAAG,WAAU;0DAAmF;;;;;;;;;;;;;;;;;;0CAOrG,8OAAC;;kDACC,8OAAC;wCAAG,WAAU;;4CAAmD;0DAE/D,8OAAC;gDAAK,WAAU;;;;;;;;;;;;kDAElB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDACC,WAAU;gDACV,MAAK;0DAEL,cAAA,8OAAC,sNAAQ;oDAAC,WAAU;;;;;;;;;;;0DAEtB,8OAAC;gDACC,WAAU;gDACV,MAAK;0DAEL,cAAA,8OAAC,yNAAS;oDAAC,WAAU;;;;;;;;;;;0DAEvB,8OAAC;gDACC,WAAU;gDACV,MAAK;0DAEL,cAAA,8OAAC,mNAAO;oDAAC,WAAU;;;;;;;;;;;0DAErB,8OAAC;gDACC,WAAU;gDACV,MAAK;0DAEL,cAAA,8OAAC,gNAAM;oDAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAO1B,8OAAC;wBAAI,WAAU;;4BAAwE;4BAClF,IAAI,OAAO,WAAW;4BAAG;;;;;;;;;;;;;;;;;;;AAKtC;uCAEe"}},
    {"offset": {"line": 661, "column": 0}, "map": {"version":3,"sources":["file:///Users/gavrilbogdan/Documents/GitHub/CleanTM/marian/Untitled/my-project/app/task/page.tsx"],"sourcesContent":["\"use client\";\nimport React, { useState, useEffect } from \"react\";\nimport { Star } from \"lucide-react\";\nimport Navbar from \"@/components/Navbar\";\nimport Footer from \"@/components/Footer\";\nimport Link from \"next/link\";\n\nconst initialTasks: any[] = [\n  {\n    id: 1,\n    title: \"Collect 250 trash from Calea Aradului\",\n    difficulty: 1,\n    basePoints: 10,\n    points: 10,\n    startedAt: null,\n    lastCompleted: null,\n    uploadedImage: null,\n  },\n  {\n    id: 2,\n    title: \"Collect 1000 trash from Zona Soarelui\",\n    difficulty: 2,\n    basePoints: 10,\n    points: 20,\n    startedAt: null,\n    lastCompleted: null,\n    uploadedImage: null,\n  },\n  {\n    id: 3,\n    title: \"Clean the Steaua Park and collect 300 nearby trash.\",\n    difficulty: 3,\n    basePoints: 10,\n    points: 30,\n    startedAt: null,\n    lastCompleted: null,\n    uploadedImage: null,\n  },\n];\n\nconst COOLDOWN = 6 * 60 * 60 * 1000; // 6 hours in ms\n\nexport default function TasksPage() {\n  const [tasks, setTasks] = useState<any[]>(initialTasks);\n  const [activeTaskId, setActiveTaskId] = useState<any>(null);\n  const [userPoints, setUserPoints] = useState<number>(0);\n  const [timeLeft, setTimeLeft] = useState<number>(0);\n\n  // Fetch user points\n  useEffect(() => {\n    fetch(\"/api/auth/me\")\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.user && typeof data.user.points === \"number\") {\n          setUserPoints(data.user.points);\n        }\n      })\n      .catch((err) => console.error(\"Error fetching user points:\", err));\n  }, []);\n\n  // Handle file uploads\n  const handleImageUpload = (taskId: any, file: any) => {\n    setTasks((prev) =>\n      prev.map((t) => (t.id === taskId ? { ...t, uploadedImage: file } : t))\n    );\n  };\n\n  const startTask = (taskId: any) => {\n    const task = tasks.find((t) => t.id === taskId);\n    if (!task) return;\n\n    // Check cooldown\n    if (task.lastCompleted && Date.now() - task.lastCompleted < COOLDOWN) {\n      alert(\"Task is on cooldown!\");\n      return;\n    }\n\n    setTasks((prev) =>\n      prev.map((t) =>\n        t.id === taskId\n          ? { ...t, points: t.basePoints * t.difficulty, startedAt: Date.now() }\n          : t\n      )\n    );\n    setActiveTaskId(taskId);\n    setTimeLeft(3 * 60 * 60); // 3 hours timer\n  };\n\n  // Timer for active task\n  useEffect(() => {\n    if (!activeTaskId) return;\n\n    const interval = setInterval(() => {\n      setTimeLeft((prev) => {\n        if (prev <= 1) {\n          clearInterval(interval);\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n\n    return () => clearInterval(interval);\n  }, [activeTaskId]);\n\n  // Finish task\n  const finishTask = async (taskId: any) => {\n    const task = tasks.find((t) => t.id === taskId);\n    if (!task || !task.uploadedImage) return;\n\n    try {\n      const res = await fetch(\"/api/tasks/addPoints\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ points: task.points }),\n      });\n      const data = await res.json();\n\n      if (data.user && typeof data.user.points === \"number\") {\n        setUserPoints(data.user.points);\n      }\n\n      setTasks((prev) =>\n        prev.map((t) =>\n          t.id === taskId\n            ? {\n                ...t,\n                startedAt: null,\n                lastCompleted: Date.now(), // set cooldown start\n                uploadedImage: null,\n              }\n            : t\n        )\n      );\n\n      setActiveTaskId(null);\n      setTimeLeft(0);\n    } catch (err) {\n      console.error(\"Error updating points:\", err);\n    }\n  };\n\n  const formatTime = (seconds: number) => {\n    const h = Math.floor(seconds / 3600);\n    const m = Math.floor((seconds % 3600) / 60);\n    const s = seconds % 60;\n    return `${h}h ${m}m ${s}s`;\n  };\n\n  const getCooldownLeft = (lastCompleted: number | null) => {\n    if (!lastCompleted) return 0;\n    const remaining = COOLDOWN - (Date.now() - lastCompleted);\n    return remaining > 0 ? Math.floor(remaining / 1000) : 0;\n  };\n\n  return (\n    <>\n      <Navbar />\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-emerald-900 pt-28 pb-20 px-5 md:px-10 flex flex-col items-center\">\n        {/* Header */}\n        <div className=\"w-full max-w-7xl flex flex-col items-center text-center mb-10\">\n          <span className=\"inline-flex items-center gap-2 rounded-full bg-emerald-500/10 border border-emerald-400/40 px-4 py-1 text-[11px] font-semibold text-emerald-200 tracking-[0.18em] uppercase\">\n            Weekly rotation\n            <span className=\"h-1 w-1 rounded-full bg-emerald-300\" />\n          </span>\n\n          <h1 className=\"mt-3 text-4xl md:text-5xl lg:text-6xl font-extrabold bg-gradient-to-b from-emerald-100 via-white to-emerald-200 text-transparent bg-clip-text tracking-wide drop-shadow-[0_0_25px_rgba(16,185,129,0.8)]\">\n            Weekly Quests\n          </h1>\n\n          <p className=\"mt-3 max-w-2xl text-sm md:text-base text-emerald-100/80\">\n            Accept time-limited cleanup quests, upload proof and earn points for\n            the global leaderboard and eco rewards.\n          </p>\n\n          {/* Points badge */}\n          <div className=\"relative mt-8 bg-slate-950/70 backdrop-blur-xl px-8 py-4 rounded-2xl shadow-[0_0_30px_rgba(16,185,129,0.6)] border border-emerald-400/50 text-emerald-50 font-bold text-center\">\n            <div className=\"text-[11px] uppercase tracking-[0.22em] text-emerald-300\">\n              Your points\n            </div>\n            <div className=\"mt-1 text-3xl md:text-4xl font-extrabold\">\n              {userPoints}\n            </div>\n            <div className=\"mt-1 text-[11px] text-emerald-200/80\">\n              Earn more by completing and verifying quests\n            </div>\n\n            {/* subtle top glow bar */}\n            <div className=\"pointer-events-none absolute inset-x-10 -top-3 h-[2px] bg-gradient-to-r from-transparent via-emerald-300 to-transparent opacity-80\" />\n          </div>\n\n          {/* Leaderboard button ‚Äì soft, below points */}\n          <div className=\"mt-5\">\n            <Link href=\"/Leaderboard\">\n              <button\n                className=\"\n                  inline-flex items-center gap-2 \n                  px-6 py-2 rounded-full \n                  bg-emerald-500/80 hover:bg-emerald-400 \n                  text-slate-950 font-semibold text-sm\n                  shadow-lg shadow-emerald-800/40\n                  hover:shadow-emerald-500/60\n                  transition-all duration-300\n                  hover:scale-[1.03] cursor-pointer\n                \"\n              >\n                View leaderboard üèÜ\n              </button>\n            </Link>\n          </div>\n        </div>\n\n        {/* Tasks grid */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8 w-full max-w-7xl\">\n          {tasks.map((task, idx) => {\n            const cooldownLeft = getCooldownLeft(task.lastCompleted);\n            const onCooldown = cooldownLeft > 0;\n            const isActive = activeTaskId === task.id;\n\n            return (\n              <div\n                key={task.id}\n                className={`group flex flex-col items-stretch justify-between p-7 rounded-3xl \n                  bg-slate-900/70 backdrop-blur-2xl border border-emerald-500/25 \n                  shadow-[0_0_35px_rgba(15,23,42,0.9)]\n                  hover:shadow-[0_0_45px_rgba(16,185,129,0.7)]\n                  transition-all duration-400 hover:-translate-y-2`}\n              >\n                {/* Top label */}\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h2 className=\"text-lg font-bold text-emerald-50\">\n                    Task {idx + 1}\n                  </h2>\n                  <span className=\"px-3 py-1 rounded-full text-[11px] font-semibold bg-emerald-500/10 border border-emerald-400/40 text-emerald-200\">\n                    +{task.points} pts\n                  </span>\n                </div>\n\n                {/* Difficulty */}\n                <div className=\"flex flex-col items-start mb-4\">\n                  <span className=\"text-xs font-semibold text-emerald-200 uppercase tracking-[0.18em] mb-1\">\n                    Difficulty\n                  </span>\n                  <div className=\"flex items-center gap-1\">\n                    {[...Array(task.difficulty)].map((_, i) => (\n                      <Star key={i} className=\"w-5 h-5 text-yellow-400\" />\n                    ))}\n                  </div>\n                </div>\n\n                {/* Title */}\n                <p className=\"text-sm md:text-[15px] font-medium text-emerald-50 mb-4 min-h-[60px]\">\n                  {task.title}\n                </p>\n\n                {/* Active timer / cooldown info */}\n                {isActive && (\n                  <p className=\"text-xs font-medium text-emerald-200 mb-4\">\n                    Time Left:{\" \"}\n                    <span className=\"text-emerald-300\">\n                      {formatTime(timeLeft)}\n                    </span>\n                  </p>\n                )}\n\n                {!isActive && onCooldown && (\n                  <p className=\"text-xs font-medium text-amber-300 mb-4\">\n                    On cooldown: {formatTime(cooldownLeft)}\n                  </p>\n                )}\n\n                {/* Upload proof (only for active task) */}\n                {isActive && (\n                  <label className=\"relative mt-2 mb-4 inline-flex items-center justify-center px-6 py-2 rounded-full font-semibold bg-gradient-to-r from-emerald-500 to-green-600 text-white shadow-lg shadow-emerald-800/30 hover:shadow-emerald-600/40 hover:scale-[1.02] transition-all cursor-pointer\">\n                    {task.uploadedImage ? \"üìÅ File Selected\" : \"‚¨Ü Upload Proof\"}\n                    <input\n                      type=\"file\"\n                      accept=\"image/*\"\n                      onChange={(e: any) =>\n                        e.target.files &&\n                        handleImageUpload(task.id, e.target.files[0])\n                      }\n                      className=\"absolute inset-0 opacity-0 cursor-pointer\"\n                    />\n                  </label>\n                )}\n\n                {/* Spacer */}\n                <div className=\"flex-1\" />\n\n                {/* Start / Finish buttons */}\n                {!activeTaskId && (\n                  <button\n                    onClick={() => startTask(task.id)}\n                    disabled={onCooldown}\n                    className={`mt-2 w-full text-center py-3 rounded-full font-bold text-sm\n                      bg-gradient-to-r from-emerald-500 to-emerald-600 text-white \n                      shadow-lg shadow-emerald-800/40\n                      hover:shadow-emerald-500/60 hover:scale-[1.03] transition-all\n                      ${\n                        onCooldown\n                          ? \"opacity-40 cursor-not-allowed hover:scale-100 hover:shadow-none\"\n                          : \"\"\n                      }`}\n                  >\n                    {onCooldown\n                      ? `Cooldown: ${formatTime(cooldownLeft)}`\n                      : \"Start Task\"}\n                  </button>\n                )}\n\n                {isActive && (\n                  <button\n                    onClick={() => finishTask(task.id)}\n                    disabled={!task.uploadedImage}\n                    className={`mt-2 w-full text-center py-3 rounded-full font-bold text-sm transition-all \n                      ${\n                        task.uploadedImage\n                          ? \"bg-gradient-to-r from-emerald-500 to-teal-500 text-white shadow-lg shadow-emerald-700/50 hover:scale-[1.03]\"\n                          : \"bg-slate-600 text-slate-200 cursor-not-allowed\"\n                      }`}\n                  >\n                    Finish Task\n                  </button>\n                )}\n              </div>\n            );\n          })}\n        </div>\n      </div>\n      <Footer />\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}