{"version":3,"sources":["../../../../app/profile/settings/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\n\nexport default function ProfileSettingsPage() {\n  const [username, setUsername] = useState(\"\");\n  const [avatarUrl, setAvatarUrl] = useState(\"\");\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [message, setMessage] = useState<string | null>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  // Load current user data\n  useEffect(() => {\n    const load = async () => {\n      try {\n        const res = await fetch(\"/api/auth/me\");\n        if (!res.ok) {\n          setLoading(false);\n          return;\n        }\n        const data = await res.json();\n        const user = data.user;\n\n        if (user) {\n          setUsername(user.username || \"\");\n          setAvatarUrl(user.avatarUrl || \"\");\n        }\n      } catch (err) {\n        console.error(\"Error loading user in settings:\", err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    load();\n  }, []);\n\n  const handleSave = async () => {\n    setSaving(true);\n    setMessage(null);\n    setError(null);\n\n    try {\n      const res = await fetch(\"/api/profile\", {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ username, avatarUrl }),\n      });\n\n      const data = await res.json();\n\n      if (!res.ok) {\n        setError(data.error || \"Failed to save profile.\");\n      } else {\n        setMessage(\"Profile updated successfully!\");\n      }\n    } catch (err) {\n      console.error(\"Error saving profile:\", err);\n      setError(\"Unexpected error.\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-[#020617] text-white flex items-center justify-center\">\n        <p className=\"text-sm text-gray-400\">Loading profile settings…</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-[#020617] text-white px-6 py-10 flex justify-center\">\n      <div className=\"w-full max-w-lg bg-[#020617] border border-[#1e293b] rounded-2xl p-6 shadow-xl\">\n        <h1 className=\"text-2xl font-bold mb-2\">Profile settings</h1>\n        <p className=\"text-xs text-gray-400 mb-6\">\n          Customize your username and avatar. These will appear on leaderboards\n          and your profile.\n        </p>\n\n        <div className=\"space-y-4 text-sm\">\n          <div>\n            <label className=\"block text-gray-300 mb-1\">Username</label>\n            <input\n              value={username}\n              onChange={(e) => setUsername(e.target.value)}\n              placeholder=\"@eco.hero\"\n              className=\"w-full rounded-lg bg-[#020617] border border-[#1e293b] px-3 py-2 outline-none text-sm text-gray-100 placeholder:text-gray-500 focus:border-emerald-500\"\n            />\n            <p className=\"text-[11px] text-gray-500 mt-1\">\n              3–20 characters. Unique across the platform.\n            </p>\n          </div>\n\n          <div>\n            <label className=\"block text-gray-300 mb-1\">Avatar URL</label>\n            <input\n              value={avatarUrl}\n              onChange={(e) => setAvatarUrl(e.target.value)}\n              placeholder=\"https://example.com/avatar.png\"\n              className=\"w-full rounded-lg bg-[#020617] border border-[#1e293b] px-3 py-2 outline-none text-sm text-gray-100 placeholder:text-gray-500 focus:border-emerald-500\"\n            />\n            <p className=\"text-[11px] text-gray-500 mt-1\">\n              For now, paste an image URL. (Later you can add an upload system.)\n            </p>\n          </div>\n\n          {avatarUrl && (\n            <div className=\"mt-3\">\n              <p className=\"text-[11px] text-gray-400 mb-1\">Avatar preview:</p>\n              <div className=\"w-16 h-16 rounded-xl overflow-hidden border border-[#1e293b]\">\n                <img\n                  src={avatarUrl}\n                  alt=\"Avatar preview\"\n                  className=\"w-full h-full object-cover\"\n                />\n              </div>\n            </div>\n          )}\n        </div>\n\n        {error && (\n          <p className=\"mt-4 text-xs text-red-400 bg-red-950/30 border border-red-900/60 rounded-md px-3 py-2\">\n            {error}\n          </p>\n        )}\n        {message && (\n          <p className=\"mt-4 text-xs text-emerald-300 bg-emerald-950/30 border border-emerald-900/60 rounded-md px-3 py-2\">\n            {message}\n          </p>\n        )}\n\n        <button\n          onClick={handleSave}\n          disabled={saving}\n          className={`mt-6 w-full py-2.5 rounded-full text-sm font-semibold \n            bg-emerald-600 hover:bg-emerald-500 transition \n            disabled:opacity-50 disabled:cursor-not-allowed`}\n        >\n          {saving ? \"Saving…\" : \"Save changes\"}\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}