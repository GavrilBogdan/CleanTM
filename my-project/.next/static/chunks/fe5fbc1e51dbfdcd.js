(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15258,(e,t,i)=>{e.e,function(e){"use strict";var t=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(e){L.Util.setOptions(this,e),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var t=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,t?this._withAnimation:this._noAnimation),this._markerCluster=t?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(e){if(e instanceof L.LayerGroup)return this.addLayers([e]);if(!e.getLatLng)return this._nonPointGroup.addLayer(e),this.fire("layeradd",{layer:e}),this;if(!this._map)return this._needsClustering.push(e),this.fire("layeradd",{layer:e}),this;if(this.hasLayer(e))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(e,this._maxZoom),this.fire("layeradd",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var t=e,i=this._zoom;if(e.__parent)for(;t.__parent._zoom>=i;)t=t.__parent;return this._currentShownBounds.contains(t.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(e,t):this._animationAddLayerNonAnimated(e,t)),this},removeLayer:function(e){return e instanceof L.LayerGroup?this.removeLayers([e]):(e.getLatLng?this._map?e.__parent&&(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(e)),this._removeLayer(e,!0),this.fire("layerremove",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),e.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(e)&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow())):(!this._arraySplice(this._needsClustering,e)&&this.hasLayer(e)&&this._needsRemoving.push({layer:e,latlng:e._latlng}),this.fire("layerremove",{layer:e})):(this._nonPointGroup.removeLayer(e),this.fire("layerremove",{layer:e})),this)},addLayers:function(e,t){if(!L.Util.isArray(e))return this.addLayer(e);var i,r=this._featureGroup,s=this._nonPointGroup,n=this.options.chunkedLoading,o=this.options.chunkInterval,a=this.options.chunkProgress,l=e.length,d=0,h=!0;if(this._map){var u=new Date().getTime(),c=L.bind(function(){var p=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();d<l&&!(n&&d%200==0&&new Date().getTime()-p>o);d++){if((i=e[d])instanceof L.LayerGroup){h&&(e=e.slice(),h=!1),this._extractNonGroupLayers(i,e),l=e.length;continue}if(!i.getLatLng){s.addLayer(i),t||this.fire("layeradd",{layer:i});continue}if(!this.hasLayer(i)&&(this._addLayer(i,this._maxZoom),t||this.fire("layeradd",{layer:i}),i.__parent&&2===i.__parent.getChildCount())){var _=i.__parent.getAllChildMarkers(),m=_[0]===i?_[1]:_[0];r.removeLayer(m)}}a&&a(d,l,new Date().getTime()-u),d===l?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(c,this.options.chunkDelay)},this);c()}else for(var p=this._needsClustering;d<l;d++){if((i=e[d])instanceof L.LayerGroup){h&&(e=e.slice(),h=!1),this._extractNonGroupLayers(i,e),l=e.length;continue}if(!i.getLatLng){s.addLayer(i);continue}this.hasLayer(i)||p.push(i)}return this},removeLayers:function(e){var t,i,r=e.length,s=this._featureGroup,n=this._nonPointGroup,o=!0;if(!this._map){for(t=0;t<r;t++){if((i=e[t])instanceof L.LayerGroup){o&&(e=e.slice(),o=!1),this._extractNonGroupLayers(i,e),r=e.length;continue}this._arraySplice(this._needsClustering,i),n.removeLayer(i),this.hasLayer(i)&&this._needsRemoving.push({layer:i,latlng:i._latlng}),this.fire("layerremove",{layer:i})}return this}if(this._unspiderfy){this._unspiderfy();var a=e.slice(),l=r;for(t=0;t<l;t++){if((i=a[t])instanceof L.LayerGroup){this._extractNonGroupLayers(i,a),l=a.length;continue}this._unspiderfyLayer(i)}}for(t=0;t<r;t++){if((i=e[t])instanceof L.LayerGroup){o&&(e=e.slice(),o=!1),this._extractNonGroupLayers(i,e),r=e.length;continue}if(!i.__parent){n.removeLayer(i),this.fire("layerremove",{layer:i});continue}this._removeLayer(i,!0,!0),this.fire("layerremove",{layer:i}),s.hasLayer(i)&&(s.removeLayer(i),i.clusterShow&&i.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(e){e.off(this._childMarkerEventHandlers,this),delete e.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var e=new L.LatLngBounds;this._topClusterLevel&&e.extend(this._topClusterLevel._bounds);for(var t=this._needsClustering.length-1;t>=0;t--)e.extend(this._needsClustering[t].getLatLng());return e.extend(this._nonPointGroup.getBounds()),e},eachLayer:function(e,t){var i,r,s,n=this._needsClustering.slice(),o=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(n),r=n.length-1;r>=0;r--){for(i=!0,s=o.length-1;s>=0;s--)if(o[s].layer===n[r]){i=!1;break}i&&e.call(t,n[r])}this._nonPointGroup.eachLayer(e,t)},getLayers:function(){var e=[];return this.eachLayer(function(t){e.push(t)}),e},getLayer:function(e){var t=null;return e=parseInt(e,10),this.eachLayer(function(i){L.stamp(i)===e&&(t=i)}),t},hasLayer:function(e){if(!e)return!1;var t,i=this._needsClustering;for(t=i.length-1;t>=0;t--)if(i[t]===e)return!0;for(t=(i=this._needsRemoving).length-1;t>=0;t--)if(i[t].layer===e)return!1;return!!(e.__parent&&e.__parent._group===this)||this._nonPointGroup.hasLayer(e)},zoomToShowLayer:function(e,t){var i=this._map;"function"!=typeof t&&(t=function(){});var r=function(){(i.hasLayer(e)||i.hasLayer(e.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",r,this),this.off("animationend",r,this),i.hasLayer(e)?t():e.__parent._icon&&(this.once("spiderfied",t,this),e.__parent.spiderfy()))};e._icon&&this._map.getBounds().contains(e.getLatLng())?t():e.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",r,this),this._map.panTo(e.getLatLng())):(this._map.on("moveend",r,this),this.on("animationend",r,this),e.__parent.zoomToBounds())},onAdd:function(e){var t,i,r;if(this._map=e,!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(e),this._nonPointGroup.addTo(e),this._gridClusters||this._generateInitialClusters(),this._maxLat=e.options.crs.projection.MAX_LATITUDE,t=0,i=this._needsRemoving.length;t<i;t++)(r=this._needsRemoving[t]).newlatlng=r.layer._latlng,r.layer._latlng=r.latlng;for(t=0,i=this._needsRemoving.length;t<i;t++)r=this._needsRemoving[t],this._removeLayer(r.layer,!0),r.layer._latlng=r.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),i=this._needsClustering,this._needsClustering=[],this.addLayers(i,!0)},onRemove:function(e){e.off("zoomend",this._zoomEnd,this),e.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(e){for(var t=e;t&&!t._icon;)t=t.__parent;return t||null},_arraySplice:function(e,t){for(var i=e.length-1;i>=0;i--)if(e[i]===t)return e.splice(i,1),!0},_removeFromGridUnclustered:function(e,t){for(var i=this._map,r=this._gridUnclustered,s=Math.floor(this._map.getMinZoom());t>=s&&r[t].removeObject(e,i.project(e.getLatLng(),t));t--);},_childMarkerDragStart:function(e){e.target.__dragStart=e.target._latlng},_childMarkerMoved:function(e){if(!this._ignoreMove&&!e.target.__dragStart){var t=e.target._popup&&e.target._popup.isOpen();this._moveChild(e.target,e.oldLatLng,e.latlng),t&&e.target.openPopup()}},_moveChild:function(e,t,i){e._latlng=t,this.removeLayer(e),e._latlng=i,this.addLayer(e)},_childMarkerDragEnd:function(e){var t=e.target.__dragStart;delete e.target.__dragStart,t&&this._moveChild(e.target,t,e.target._latlng)},_removeLayer:function(e,t,i){var r=this._gridClusters,s=this._gridUnclustered,n=this._featureGroup,o=this._map,a=Math.floor(this._map.getMinZoom());t&&this._removeFromGridUnclustered(e,this._maxZoom);var l,d=e.__parent,h=d._markers;for(this._arraySplice(h,e);d&&(d._childCount--,d._boundsNeedUpdate=!0,!(d._zoom<a));)t&&d._childCount<=1?(l=d._markers[0]===e?d._markers[1]:d._markers[0],r[d._zoom].removeObject(d,o.project(d._cLatLng,d._zoom)),s[d._zoom].addObject(l,o.project(l.getLatLng(),d._zoom)),this._arraySplice(d.__parent._childClusters,d),d.__parent._markers.push(l),l.__parent=d.__parent,d._icon&&(n.removeLayer(d),i||n.addLayer(l))):d._iconNeedsUpdate=!0,d=d.__parent;delete e.__parent},_isOrIsParent:function(e,t){for(;t;){if(e===t)return!0;t=t.parentNode}return!1},fire:function(e,t,i){if(t&&t.layer instanceof L.MarkerCluster){if(t.originalEvent&&this._isOrIsParent(t.layer._icon,t.originalEvent.relatedTarget))return;e="cluster"+e}L.FeatureGroup.prototype.fire.call(this,e,t,i)},listens:function(e,t){return L.FeatureGroup.prototype.listens.call(this,e,t)||L.FeatureGroup.prototype.listens.call(this,"cluster"+e,t)},_defaultIconCreateFunction:function(e){var t=e.getChildCount(),i=" marker-cluster-";return t<10?i+="small":t<100?i+="medium":i+="large",new L.DivIcon({html:"<div><span>"+t+"</span></div>",className:"marker-cluster"+i,iconSize:new L.Point(40,40)})},_bindEvents:function(){var e=this._map,t=this.options.spiderfyOnMaxZoom,i=this.options.showCoverageOnHover,r=this.options.zoomToBoundsOnClick,s=this.options.spiderfyOnEveryZoom;(t||r||s)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),i&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),e.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(e){var t=e.layer,i=t;if("clusterkeypress"!==e.type||!e.originalEvent||13===e.originalEvent.keyCode){for(;1===i._childClusters.length;)i=i._childClusters[0];i._zoom===this._maxZoom&&i._childCount===t._childCount&&this.options.spiderfyOnMaxZoom?t.spiderfy():this.options.zoomToBoundsOnClick&&t.zoomToBounds(),this.options.spiderfyOnEveryZoom&&t.spiderfy(),e.originalEvent&&13===e.originalEvent.keyCode&&this._map._container.focus()}},_showCoverage:function(e){var t=this._map;!this._inZoomAnimation&&(this._shownPolygon&&t.removeLayer(this._shownPolygon),e.layer.getChildCount()>2&&e.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(e.layer.getConvexHull(),this.options.polygonOptions),t.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var e=this.options.spiderfyOnMaxZoom,t=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,r=this.options.spiderfyOnEveryZoom,s=this._map;(e||i||r)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),t&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),s.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var e=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),e),this._currentShownBounds=e}},_generateInitialClusters:function(){var e=Math.ceil(this._map.getMaxZoom()),t=Math.floor(this._map.getMinZoom()),i=this.options.maxClusterRadius,r=i;"function"!=typeof i&&(r=function(){return i}),null!==this.options.disableClusteringAtZoom&&(e=this.options.disableClusteringAtZoom-1),this._maxZoom=e,this._gridClusters={},this._gridUnclustered={};for(var s=e;s>=t;s--)this._gridClusters[s]=new L.DistanceGrid(r(s)),this._gridUnclustered[s]=new L.DistanceGrid(r(s));this._topClusterLevel=new this._markerCluster(this,t-1)},_addLayer:function(e,t){var i,r,s=this._gridClusters,n=this._gridUnclustered,o=Math.floor(this._map.getMinZoom());for(this.options.singleMarkerMode&&this._overrideMarkerIcon(e),e.on(this._childMarkerEventHandlers,this);t>=o;t--){i=this._map.project(e.getLatLng(),t);var a=s[t].getNearObject(i);if(a){a._addChild(e),e.__parent=a;return}if(a=n[t].getNearObject(i)){var l=a.__parent;l&&this._removeLayer(a,!1);var d=new this._markerCluster(this,t,a,e);s[t].addObject(d,this._map.project(d._cLatLng,t)),a.__parent=d,e.__parent=d;var h=d;for(r=t-1;r>l._zoom;r--)h=new this._markerCluster(this,r,h),s[r].addObject(h,this._map.project(a.getLatLng(),r));l._addChild(h),this._removeFromGridUnclustered(a,t);return}n[t].addObject(e,i)}this._topClusterLevel._addChild(e),e.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(e){e instanceof L.MarkerCluster&&e._iconNeedsUpdate&&e._updateIcon()})},_enqueue:function(e){this._queue.push(e),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var e=0;e<this._queue.length;e++)this._queue[e].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var e=Math.round(this._map._zoom);this._processQueue(),this._zoom<e&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,e)):this._zoom>e?(this._animationStart(),this._animationZoomOut(this._zoom,e)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(e){var t=this._maxLat;return void 0!==t&&(e.getNorth()>=t&&(e._northEast.lat=1/0),e.getSouth()<=-t&&(e._southWest.lat=-1/0)),e},_animationAddLayerNonAnimated:function(e,t){if(t===e)this._featureGroup.addLayer(e);else if(2===t._childCount){t._addToMap();var i=t.getAllChildMarkers();this._featureGroup.removeLayer(i[0]),this._featureGroup.removeLayer(i[1])}else t._updateIcon()},_extractNonGroupLayers:function(e,t){var i,r=e.getLayers(),s=0;for(t=t||[];s<r.length;s++){if((i=r[s])instanceof L.LayerGroup){this._extractNonGroupLayers(i,t);continue}t.push(i)}return t},_overrideMarkerIcon:function(e){return e.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[e]}})}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(e,t){this._animationAddLayerNonAnimated(e,t)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(e,t){var i,r=this._getExpandedVisibleBounds(),s=this._featureGroup,n=Math.floor(this._map.getMinZoom());this._ignoreMove=!0,this._topClusterLevel._recursively(r,e,n,function(n){var o,a=n._latlng,l=n._markers;for(r.contains(a)||(a=null),n._isSingleParent()&&e+1===t?(s.removeLayer(n),n._recursivelyAddChildrenToMap(null,t,r)):(n.clusterHide(),n._recursivelyAddChildrenToMap(a,t,r)),i=l.length-1;i>=0;i--)o=l[i],r.contains(o._latlng)||s.removeLayer(o)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(r,t),s.eachLayer(function(e){e instanceof L.MarkerCluster||!e._icon||e.clusterShow()}),this._topClusterLevel._recursively(r,e,t,function(e){e._recursivelyRestoreChildPositions(t)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(r,e,n,function(e){s.removeLayer(e),e.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(e,t){this._animationZoomOutSingle(this._topClusterLevel,e-1,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e,this._getExpandedVisibleBounds())},_animationAddLayer:function(e,t){var i=this,r=this._featureGroup;r.addLayer(e),t!==e&&(t._childCount>2?(t._updateIcon(),this._forceLayout(),this._animationStart(),e._setPos(this._map.latLngToLayerPoint(t.getLatLng())),e.clusterHide(),this._enqueue(function(){r.removeLayer(e),e.clusterShow(),i._animationEnd()})):(this._forceLayout(),i._animationStart(),i._animationZoomOutSingle(t,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(e,t,i){var r=this._getExpandedVisibleBounds(),s=Math.floor(this._map.getMinZoom());e._recursivelyAnimateChildrenInAndAddSelfToMap(r,s,t+1,i);var n=this;this._forceLayout(),e._recursivelyBecomeVisible(r,i),this._enqueue(function(){if(1===e._childCount){var o=e._markers[0];this._ignoreMove=!0,o.setLatLng(o.getLatLng()),this._ignoreMove=!1,o.clusterShow&&o.clusterShow()}else e._recursively(r,i,s,function(e){e._recursivelyRemoveChildrenFromMap(r,s,t+1)});n._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(e){return new L.MarkerClusterGroup(e)};var i=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(e,t,i,r){L.Marker.prototype.initialize.call(this,i?i._cLatLng||i.getLatLng():new L.LatLng(0,0),{icon:this,pane:e.options.clusterPane}),this._group=e,this._zoom=t,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,i&&this._addChild(i),r&&this._addChild(r)},getAllChildMarkers:function(e,t){e=e||[];for(var i=this._childClusters.length-1;i>=0;i--)this._childClusters[i].getAllChildMarkers(e,t);for(var r=this._markers.length-1;r>=0;r--)t&&this._markers[r].__dragStart||e.push(this._markers[r]);return e},getChildCount:function(){return this._childCount},zoomToBounds:function(e){for(var t,i=this._childClusters.slice(),r=this._group._map,s=r.getBoundsZoom(this._bounds),n=this._zoom+1,o=r.getZoom();i.length>0&&s>n;){n++;var a=[];for(t=0;t<i.length;t++)a=a.concat(i[t]._childClusters);i=a}s>n?this._group._map.setView(this._latlng,n):s<=o?this._group._map.setView(this._latlng,o+1):this._group._map.fitBounds(this._bounds,e)},getBounds:function(){var e=new L.LatLngBounds;return e.extend(this._bounds),e},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(e,t){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(e),e instanceof L.MarkerCluster?(t||(this._childClusters.push(e),e.__parent=this),this._childCount+=e._childCount):(t||this._markers.push(e),this._childCount++),this.__parent&&this.__parent._addChild(e,!0)},_setClusterCenter:function(e){this._cLatLng||(this._cLatLng=e._cLatLng||e._latlng)},_resetBounds:function(){var e=this._bounds;e._southWest&&(e._southWest.lat=1/0,e._southWest.lng=1/0),e._northEast&&(e._northEast.lat=-1/0,e._northEast.lng=-1/0)},_recalculateBounds:function(){var e,t,i,r,s=this._markers,n=this._childClusters,o=0,a=0,l=this._childCount;if(0!==l){for(this._resetBounds(),e=0;e<s.length;e++)i=s[e]._latlng,this._bounds.extend(i),o+=i.lat,a+=i.lng;for(e=0;e<n.length;e++)(t=n[e])._boundsNeedUpdate&&t._recalculateBounds(),this._bounds.extend(t._bounds),i=t._wLatLng,r=t._childCount,o+=i.lat*r,a+=i.lng*r;this._latlng=this._wLatLng=new L.LatLng(o/l,a/l),this._boundsNeedUpdate=!1}},_addToMap:function(e){e&&(this._backupLatlng=this._latlng,this.setLatLng(e)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(e,t,i){this._recursively(e,this._group._map.getMinZoom(),i-1,function(e){var i,r,s=e._markers;for(i=s.length-1;i>=0;i--)(r=s[i])._icon&&(r._setPos(t),r.clusterHide())},function(e){var i,r,s=e._childClusters;for(i=s.length-1;i>=0;i--)(r=s[i])._icon&&(r._setPos(t),r.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(e,t,i,r){this._recursively(e,r,t,function(s){s._recursivelyAnimateChildrenIn(e,s._group._map.latLngToLayerPoint(s.getLatLng()).round(),i),s._isSingleParent()&&i-1===r?(s.clusterShow(),s._recursivelyRemoveChildrenFromMap(e,t,i)):s.clusterHide(),s._addToMap()})},_recursivelyBecomeVisible:function(e,t){this._recursively(e,this._group._map.getMinZoom(),t,null,function(e){e.clusterShow()})},_recursivelyAddChildrenToMap:function(e,t,i){this._recursively(i,this._group._map.getMinZoom()-1,t,function(r){if(t!==r._zoom)for(var s=r._markers.length-1;s>=0;s--){var n=r._markers[s];i.contains(n._latlng)&&(e&&(n._backupLatlng=n.getLatLng(),n.setLatLng(e),n.clusterHide&&n.clusterHide()),r._group._featureGroup.addLayer(n))}},function(t){t._addToMap(e)})},_recursivelyRestoreChildPositions:function(e){for(var t=this._markers.length-1;t>=0;t--){var i=this._markers[t];i._backupLatlng&&(i.setLatLng(i._backupLatlng),delete i._backupLatlng)}if(e-1===this._zoom)for(var r=this._childClusters.length-1;r>=0;r--)this._childClusters[r]._restorePosition();else for(var s=this._childClusters.length-1;s>=0;s--)this._childClusters[s]._recursivelyRestoreChildPositions(e)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(e,t,i,r){var s,n;this._recursively(e,t-1,i-1,function(e){for(n=e._markers.length-1;n>=0;n--)s=e._markers[n],r&&r.contains(s._latlng)||(e._group._featureGroup.removeLayer(s),s.clusterShow&&s.clusterShow())},function(e){for(n=e._childClusters.length-1;n>=0;n--)s=e._childClusters[n],r&&r.contains(s._latlng)||(e._group._featureGroup.removeLayer(s),s.clusterShow&&s.clusterShow())})},_recursively:function(e,t,i,r,s){var n,o,a=this._childClusters,l=this._zoom;if(t<=l&&(r&&r(this),s&&l===i&&s(this)),l<t||l<i)for(n=a.length-1;n>=0;n--)(o=a[n])._boundsNeedUpdate&&o._recalculateBounds(),e.intersects(o._bounds)&&o._recursively(e,t,i,r,s)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var e=this.options.opacity;return this.setOpacity(0),this.options.opacity=e,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(e){this._cellSize=e,this._sqCellSize=e*e,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(e,t){var i=this._getCoord(t.x),r=this._getCoord(t.y),s=this._grid,n=s[r]=s[r]||{},o=n[i]=n[i]||[],a=L.Util.stamp(e);this._objectPoint[a]=t,o.push(e)},updateObject:function(e,t){this.removeObject(e),this.addObject(e,t)},removeObject:function(e,t){var i,r,s=this._getCoord(t.x),n=this._getCoord(t.y),o=this._grid,a=o[n]=o[n]||{},l=a[s]=a[s]||[];for(delete this._objectPoint[L.Util.stamp(e)],i=0,r=l.length;i<r;i++)if(l[i]===e)return l.splice(i,1),1===r&&delete a[s],!0},eachObject:function(e,t){var i,r,s,n,o,a,l=this._grid;for(i in l)for(r in o=l[i])for(s=0,n=(a=o[r]).length;s<n;s++)e.call(t,a[s])&&(s--,n--)},getNearObject:function(e){var t,i,r,s,n,o,a,l,d=this._getCoord(e.x),h=this._getCoord(e.y),u=this._objectPoint,c=this._sqCellSize,p=null;for(t=h-1;t<=h+1;t++)if(s=this._grid[t]){for(i=d-1;i<=d+1;i++)if(n=s[i])for(r=0,o=n.length;r<o;r++)a=n[r],((l=this._sqDist(u[L.Util.stamp(a)],e))<c||l<=c&&null===p)&&(c=l,p=a)}return p},_getCoord:function(e){var t=Math.floor(e/this._cellSize);return isFinite(t)?t:e},_sqDist:function(e,t){var i=t.x-e.x,r=t.y-e.y;return i*i+r*r}},L.QuickHull={getDistant:function(e,t){var i=t[1].lat-t[0].lat;return(t[0].lng-t[1].lng)*(e.lat-t[0].lat)+i*(e.lng-t[0].lng)},findMostDistantPointFromBaseLine:function(e,t){var i,r,s,n=0,o=null,a=[];for(i=t.length-1;i>=0;i--)r=t[i],(s=this.getDistant(r,e))>0&&(a.push(r),s>n&&(n=s,o=r));return{maxPoint:o,newPoints:a}},buildConvexHull:function(e,t){var i=[],r=this.findMostDistantPointFromBaseLine(e,t);return r.maxPoint?i=(i=i.concat(this.buildConvexHull([e[0],r.maxPoint],r.newPoints))).concat(this.buildConvexHull([r.maxPoint,e[1]],r.newPoints)):[e[0]]},getConvexHull:function(e){var t,i=!1,r=!1,s=!1,n=!1,o=null,a=null,l=null,d=null,h=null,u=null;for(t=e.length-1;t>=0;t--){var c=e[t];(!1===i||c.lat>i)&&(o=c,i=c.lat),(!1===r||c.lat<r)&&(a=c,r=c.lat),(!1===s||c.lng>s)&&(l=c,s=c.lng),(!1===n||c.lng<n)&&(d=c,n=c.lng)}return r!==i?(u=a,h=o):(u=d,h=l),[].concat(this.buildConvexHull([u,h],e),this.buildConvexHull([h,u],e))}},L.MarkerCluster.include({getConvexHull:function(){var e,t,i=this.getAllChildMarkers(),r=[];for(t=i.length-1;t>=0;t--)e=i[t].getLatLng(),r.push(e);return L.QuickHull.getConvexHull(r)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var e,t=this.getAllChildMarkers(null,!0),i=this._group._map.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?e=this._group.options.spiderfyShapePositions(t.length,i):t.length>=this._circleSpiralSwitchover?e=this._generatePointsSpiral(t.length,i):(i.y+=10,e=this._generatePointsCircle(t.length,i)),this._animationSpiderfy(t,e)}},unspiderfy:function(e){this._group._inZoomAnimation||(this._animationUnspiderfy(e),this._group._spiderfied=null)},_generatePointsCircle:function(e,t){var i,r,s=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+e)/this._2PI,n=this._2PI/e,o=[];for(i=0,s=Math.max(s,35),o.length=e;i<e;i++)r=this._circleStartAngle+i*n,o[i]=new L.Point(t.x+s*Math.cos(r),t.y+s*Math.sin(r))._round();return o},_generatePointsSpiral:function(e,t){var i,r=this._group.options.spiderfyDistanceMultiplier,s=r*this._spiralLengthStart,n=r*this._spiralFootSeparation,o=r*this._spiralLengthFactor*this._2PI,a=0,l=[];for(l.length=e,i=e;i>=0;i--)i<e&&(l[i]=new L.Point(t.x+s*Math.cos(a),t.y+s*Math.sin(a))._round()),a+=n/s+5e-4*i,s+=o/a;return l},_noanimationUnspiderfy:function(){var e,t,i=this._group,r=i._map,s=i._featureGroup,n=this.getAllChildMarkers(null,!0);for(i._ignoreMove=!0,this.setOpacity(1),t=n.length-1;t>=0;t--)e=n[t],s.removeLayer(e),e._preSpiderfyLatlng&&(e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng),e.setZIndexOffset&&e.setZIndexOffset(0),e._spiderLeg&&(r.removeLayer(e._spiderLeg),delete e._spiderLeg);i.fire("unspiderfied",{cluster:this,markers:n}),i._ignoreMove=!1,i._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(e,t){var i,r,s,n,o=this._group,a=o._map,l=o._featureGroup,d=this._group.options.spiderLegPolylineOptions;for(i=0,o._ignoreMove=!0;i<e.length;i++)n=a.layerPointToLatLng(t[i]),r=e[i],s=new L.Polyline([this._latlng,n],d),a.addLayer(s),r._spiderLeg=s,r._preSpiderfyLatlng=r._latlng,r.setLatLng(n),r.setZIndexOffset&&r.setZIndexOffset(1e6),l.addLayer(r);this.setOpacity(.3),o._ignoreMove=!1,o.fire("spiderfied",{cluster:this,markers:e})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(e,t){var i,r,s,n,o,a,l=this,d=this._group,h=d._map,u=d._featureGroup,c=this._latlng,p=h.latLngToLayerPoint(c),_=L.Path.SVG,m=L.extend({},this._group.options.spiderLegPolylineOptions),g=m.opacity;for(void 0===g&&(g=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),_?(m.opacity=0,m.className=(m.className||"")+" leaflet-cluster-spider-leg"):m.opacity=g,d._ignoreMove=!0,i=0;i<e.length;i++)r=e[i],a=h.layerPointToLatLng(t[i]),s=new L.Polyline([c,a],m),h.addLayer(s),r._spiderLeg=s,_&&(o=(n=s._path).getTotalLength()+.1,n.style.strokeDasharray=o,n.style.strokeDashoffset=o),r.setZIndexOffset&&r.setZIndexOffset(1e6),r.clusterHide&&r.clusterHide(),u.addLayer(r),r._setPos&&r._setPos(p);for(d._forceLayout(),d._animationStart(),i=e.length-1;i>=0;i--)a=h.layerPointToLatLng(t[i]),(r=e[i])._preSpiderfyLatlng=r._latlng,r.setLatLng(a),r.clusterShow&&r.clusterShow(),_&&((n=(s=r._spiderLeg)._path).style.strokeDashoffset=0,s.setStyle({opacity:g}));this.setOpacity(.3),d._ignoreMove=!1,setTimeout(function(){d._animationEnd(),d.fire("spiderfied",{cluster:l,markers:e})},200)},_animationUnspiderfy:function(e){var t,i,r,s,n,o,a=this,l=this._group,d=l._map,h=l._featureGroup,u=e?d._latLngToNewLayerPoint(this._latlng,e.zoom,e.center):d.latLngToLayerPoint(this._latlng),c=this.getAllChildMarkers(null,!0),p=L.Path.SVG;for(l._ignoreMove=!0,l._animationStart(),this.setOpacity(1),i=c.length-1;i>=0;i--)(t=c[i])._preSpiderfyLatlng&&(t.closePopup(),t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng,o=!0,t._setPos&&(t._setPos(u),o=!1),t.clusterHide&&(t.clusterHide(),o=!1),o&&h.removeLayer(t),p&&(n=(s=(r=t._spiderLeg)._path).getTotalLength()+.1,s.style.strokeDashoffset=n,r.setStyle({opacity:0})));l._ignoreMove=!1,setTimeout(function(){var e=0;for(i=c.length-1;i>=0;i--)(t=c[i])._spiderLeg&&e++;for(i=c.length-1;i>=0;i--)(t=c[i])._spiderLeg&&(t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),e>1&&h.removeLayer(t),d.removeLayer(t._spiderLeg),delete t._spiderLeg);l._animationEnd(),l.fire("unspiderfied",{cluster:a,markers:c})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(e){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(e))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(e){this._spiderfied&&this._spiderfied.unspiderfy(e)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(e){e._spiderLeg&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),this._map.removeLayer(e._spiderLeg),delete e._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(e){return e?e instanceof L.MarkerClusterGroup?e=e._topClusterLevel.getAllChildMarkers():e instanceof L.LayerGroup?e=e._layers:e instanceof L.MarkerCluster?e=e.getAllChildMarkers():e instanceof L.Marker&&(e=[e]):e=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(e),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(e),this},_flagParentsIconsNeedUpdate:function(e){var t,i;for(t in e)for(i=e[t].__parent;i;)i._iconNeedsUpdate=!0,i=i.__parent},_refreshSingleMarkerModeMarkers:function(e){var t,i;for(t in e)i=e[t],this.hasLayer(i)&&i.setIcon(this._overrideMarkerIcon(i))}}),L.Marker.include({refreshIconOptions:function(e,t){var i=this.options.icon;return L.setOptions(i,e),this.setIcon(i),t&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),e.MarkerClusterGroup=t,e.MarkerCluster=i,Object.defineProperty(e,"__esModule",{value:!0})}(i)},65726,e=>{"use strict";var t=e.i(43476),i=e.i(32322);e.i(15258);var r=e.i(71645);let s=[{id:1,title:"Pile of trash on Calea Șagului",desc:"Torn bags, PET bottles and waste dumped near the sidewalk. Needs quick cleanup.",pos:{lat:45.7225,lng:21.226},type:"salubritate",priority:"mare"},{id:2,title:"Overflowing trash bins",desc:"Bins are full, garbage falls on the ground and is blown away by the wind.",pos:{lat:45.7578,lng:21.229},type:"salubritate",priority:"medie"},{id:3,title:"PET bottles on the Bega riverbank",desc:"Plastic bottles and bags floating on the water and along the riverbank. Needs an eco-cleanup action.",pos:{lat:45.7705,lng:21.2444},type:"ecologizare",priority:"medie"},{id:4,title:"Dirty tram station",desc:"Food leftovers, cigarette butts and packaging thrown next to the bench.",pos:{lat:45.7401,lng:21.2705},type:"salubritate",priority:"mică"},{id:5,title:"Mud and litter after rain",desc:"Puddles full of cigarette butts, bags and paper gathered on the edge of the sidewalk.",pos:{lat:45.7642,lng:21.2041},type:"salubritate",priority:"medie"},{id:6,title:"Sidewalk covered in trash",desc:"Boxes, cans and paper scattered around, making it hard for pedestrians to pass.",pos:{lat:45.75,lng:21.3},type:"salubritate",priority:"mică"},{id:7,title:"Trash island near crosswalk",desc:"Bags, bottles and household waste gathered at the street corner.",pos:{lat:45.79,lng:21.23},type:"salubritate",priority:"mică"},{id:8,title:"Parking area full of litter",desc:"Food leftovers, coffee cups and bags left next to cars.",pos:{lat:45.7195,lng:21.24},type:"salubritate",priority:"mică"},{id:9,title:"Containers used incorrectly",desc:"Glass and plastic bottles thrown next to the containers instead of inside them.",pos:{lat:45.706,lng:21.17},type:"deseuri",priority:"mică"},{id:10,title:"No recycling bins",desc:"Busy area, but only regular bins exist, no separate bins for recycling.",pos:{lat:45.77,lng:21.26},type:"ecologizare",priority:"medie"},{id:11,title:"Trash on the sidewalk near apartment blocks",desc:"Cardboard boxes, torn bags and bulky waste left on the sidewalk.",pos:{lat:45.7512,lng:21.22},type:"salubritate",priority:"medie"},{id:12,title:"Waste hanging in trees",desc:"Plastic bags stuck in branches, giving the area a neglected look.",pos:{lat:45.7583,lng:21.214},type:"ecologizare",priority:"mare"},{id:13,title:"Bus stop with trash at the base",desc:"Cigarette butts, packaging and empty bottles next to the stop pole.",pos:{lat:45.7444,lng:21.205},type:"salubritate",priority:"mică"},{id:14,title:"Pile of waste on green space",desc:"Household garbage bags dumped directly on the grass.",pos:{lat:45.7321,lng:21.197},type:"deseuri",priority:"medie"},{id:15,title:"Playground full of packaging",desc:"Bottles, bags and paper everywhere, near the slide and swings.",pos:{lat:45.7673,lng:21.222},type:"salubritate",priority:"mare"},{id:16,title:"Debris floating near drains",desc:"Leaves mixed with PET bottles and bags blocking the drain.",pos:{lat:45.7811,lng:21.232},type:"deseuri",priority:"medie"},{id:17,title:"Park with dirty alleys",desc:"Sunflower seed shells, juice boxes and bottles thrown on the ground.",pos:{lat:45.7485,lng:21.252},type:"ecologizare",priority:"mică"},{id:18,title:"Trash under pedestrian bridge",desc:"Bottles, cans and garbage bags dumped under the bridge, hard to access.",pos:{lat:45.754,lng:21.241},type:"deseuri",priority:"mare"},{id:19,title:"Green area full of plastic",desc:"Tall grass mixed with lots of PET bottles and cans.",pos:{lat:45.7615,lng:21.2105},type:"ecologizare",priority:"mică"},{id:20,title:"Dirty pedestrian underpass",desc:"Papers, cigarette butts and packaging gathered along the stairs.",pos:{lat:45.7452,lng:21.259},type:"salubritate",priority:"mare"},{id:21,title:"School entrance with litter",desc:"Students leave packaging and bottles at the gate, not enough bins.",pos:{lat:45.769,lng:21.216},type:"ecologizare",priority:"mare"},{id:22,title:"Unmaintained garbage platform",desc:"Waste thrown on the ground around the dumpsters, strong smell.",pos:{lat:45.737,lng:21.238},type:"salubritate",priority:"mare"},{id:23,title:"Construction debris by the roadside",desc:"Pieces of concrete, cement bags and rubble left randomly.",pos:{lat:45.713,lng:21.225},type:"deseuri",priority:"mică"},{id:24,title:"Pedestrian bridge with graffiti and trash",desc:"Spray paint, papers and empty bottles along the whole bridge.",pos:{lat:45.752,lng:21.19},type:"ecologizare",priority:"medie"},{id:25,title:"Construction site area full of debris",desc:"Foil, polystyrene and wood pieces blown onto public space.",pos:{lat:45.776,lng:21.205},type:"deseuri",priority:"mică"},{id:26,title:"Tram stop with broken glass",desc:"Shards and glass caps on the ground, danger for pedestrians.",pos:{lat:45.783,lng:21.246},type:"salubritate",priority:"medie"},{id:27,title:"Sports field with litter",desc:"PET bottles, bags and packaging left on the field and near the fence.",pos:{lat:45.731,lng:21.254},type:"ecologizare",priority:"mică"},{id:28,title:"Scooter and trash on sidewalk",desc:"Scooter left in the middle plus empty bottles around it.",pos:{lat:45.742,lng:21.218},type:"salubritate",priority:"mică"},{id:29,title:"Open dumpsters and scattered trash",desc:"Waste blown around by wind and animals around the dumpsters.",pos:{lat:45.755,lng:21.227},type:"deseuri",priority:"medie"},{id:30,title:"Uncleaned public transport stop",desc:"Papers, juice boxes and bottles on the ground, no sanitation intervention.",pos:{lat:45.768,lng:21.234},type:"salubritate",priority:"mică"}],n=[45.7489,21.2087];function o(e){return"mare"===e?"#ef4444":"medie"===e?"#facc15":"#22c55e"}function a(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function l(e,t){let i=[...e.map(e=>{let t="mare"===e.priority?3:"medie"===e.priority?2:1;return{...e,status:"pending",hasImage:!1,difficulty:t,basePoints:10,points:10*t}})];for(let e=i.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[i[e],i[t]]=[i[t],i[e]]}let r=Math.min(t,i.length);return{initial:i.slice(0,r),rest:i.slice(r)}}function d({problems:i}){let s=(0,r.useRef)(null),n=(0,r.useRef)(null),[o,a]=(0,r.useState)(!1),[l,d]=(0,r.useState)(null),h=[45.7489,21.2087];return(0,r.useEffect)(()=>{(async()=>{let t=await e.A(71400);await e.A(54746),d(t.default||t)})()},[]),(0,r.useEffect)(()=>{if(!l||s.current)return;let e=l.map("heatmap-container",{center:h,zoom:12,zoomControl:!0,attributionControl:!1,dragging:!0,scrollWheelZoom:!1,doubleClickZoom:!1,boxZoom:!1,keyboard:!1});l.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",{maxZoom:18}).addTo(e),s.current=e},[l]),(0,r.useEffect)(()=>{if(l&&s.current)if(o){let e=i.map(e=>[e.pos.lat,e.pos.lng,"mare"===e.priority?1:"medie"===e.priority?.8:.6]);n.current?n.current.setLatLngs(e):n.current=l.heatLayer(e,{radius:40,blur:15,maxZoom:17,gradient:{.2:"#00ff5e",.4:"#a3e635",.6:"#facc15",.8:"#f97316",1:"#dc2626"}}),n.current.addTo(s.current)}else n.current&&s.current.removeLayer(n.current)},[o,l,i]),(0,t.jsx)("div",{className:"mt-30 w-full",children:(0,t.jsxs)("div",{className:"bg-[#020617]/90 border border-[#1e293b] rounded-2xl shadow-xl p-6 max-w-7xl mx-auto backdrop-blur-xl",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-emerald-50",children:"Heatmap — Problem distribution"}),(0,t.jsx)("button",{onClick:()=>a(e=>!e),className:`px-4 py-2 rounded-lg text-sm font-semibold transition ${o?"bg-emerald-600 hover:bg-emerald-700":"bg-[#1e293b] hover:bg-[#243045]"}`,children:o?"Disable heatmap":"Enable heatmap"})]}),(0,t.jsx)("div",{id:"heatmap-container",className:"w-full h-[500px] rounded-xl overflow-hidden border border-[#1e293b]"})]})})}function h(){let e=(0,r.useRef)(null),h=(0,r.useRef)(null),u=(0,r.useRef)(null),c=(0,r.useRef)([]),p=(0,r.useRef)([]),[_,m]=(0,r.useState)([]),[g,f]=(0,r.useState)(!0),[y,v]=(0,r.useState)(!0),[x,b]=(0,r.useState)(null),[C,w]=(0,r.useState)({type:"toate",priority:"toate"}),[k,M]=(0,r.useState)(Date.now()),[j,N]=(0,r.useState)(0);(0,r.useEffect)(()=>{let e=setInterval(()=>M(Date.now()),1e3);return()=>clearInterval(e)},[]),(0,r.useEffect)(()=>{fetch("/api/auth/me").then(e=>e.json()).then(e=>{e.user&&"number"==typeof e.user.points&&N(e.user.points)}).catch(e=>console.error("Error fetching user points:",e))},[]);let S=(0,r.useCallback)(async()=>{try{let e=await fetch("/api/problems");if(!e.ok)throw Error("No API");let t=await e.json(),i=Array.isArray(t.problems)&&t.problems.length>0?t.problems:s,{initial:r,rest:n}=l(i,10);m(r),p.current=n}catch{let{initial:e,rest:t}=l(s,10);m(e),p.current=t}finally{v(!1)}},[]);(0,r.useEffect)(()=>{S()},[S]),(0,r.useEffect)(()=>{if(!e.current||h.current)return;let t=i.default.map(e.current,{center:n,zoom:13,zoomControl:!0,attributionControl:!0});i.default.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",{maxZoom:19}).addTo(t);let r=i.default.markerClusterGroup({showCoverageOnHover:!1,maxClusterRadius:45});r.addTo(t),u.current=r,h.current=t,f(!1)},[]);let P=(0,r.useMemo)(()=>_.filter(e=>{let t="toate"===C.type||C.type===e.type,i="toate"===C.priority||C.priority===e.priority;return t&&i}),[_,C]);(0,r.useEffect)(()=>{if(u.current&&h.current&&(u.current.clearLayers(),c.current=[],P.forEach(e=>{var t;let r=i.default.divIcon({className:"marker-wrapper",iconSize:[22,22],iconAnchor:[11,11],html:`
          <div class="marker-pulse"
               style="background:${o(e.priority)};
                      border:2px solid #000;">
          </div>
        `}),s=i.default.marker([e.pos.lat,e.pos.lng],{icon:r}),n=`
        <div class="popup-card">
          <div class="popup-title">${a(e.title)}</div>
          <div class="popup-desc">${a(e.desc)}</div>
          <div class="popup-meta">
            <span class="popup-pill">${a(e.type)}</span>
            <span class="popup-pill">${a("mare"===(t=e.priority)?"High":"medie"===t?"Medium":"mică"===t?"Low":t)}</span>
            <span class="popup-id">#${e.id}</span>
          </div>
        </div>
     `;s.bindPopup(n),s.on("click",()=>b(e)),u.current.addLayer(s),c.current.push({id:e.id,marker:s})}),P.length>0)){let e=i.default.latLngBounds(P.map(e=>[e.pos.lat,e.pos.lng]));h.current.fitBounds(e,{padding:[40,40]})}},[P]);let A=async e=>{let t=_.find(t=>t.id===e);if(t&&t.hasImage)try{let i=await fetch("/api/tasks/addPoints",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({points:t.points})}),r=await i.json();r.user&&"number"==typeof r.user.points&&N(r.user.points),m(t=>t.map(t=>t.id===e?{...t,status:"finished"}:t))}catch(e){console.error("Error updating points:",e)}},z=y?"Loading...":`Filtered problems: ${P.length}`;return(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-emerald-900 pt-28 pb-20 text-emerald-50",children:[(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-6",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-full bg-emerald-500/10 border border-emerald-400/40 px-4 py-1 text-[11px] font-semibold uppercase tracking-[0.18em] text-emerald-200",children:["Map quests",(0,t.jsx)("span",{className:"h-1 w-1 rounded-full bg-emerald-300"})]}),(0,t.jsx)("h1",{className:"mt-3 text-3xl font-bold bg-gradient-to-b from-emerald-100 via-white to-emerald-200 text-transparent bg-clip-text drop-shadow-[0_0_24px_rgba(16,185,129,0.8)]",children:"Timișoara — Cleanup Quests Map"}),(0,t.jsx)("p",{className:"text-sm text-emerald-100/80 mt-1 max-w-xl",children:"Every time you open the app, a new random set of 10 sanitation and eco-cleanup quests is loaded across the city. Accept a quest, clean the area, upload proof and earn points."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"px-4 py-2 rounded-xl bg-[#020617]/90 border border-[#1e293b] shadow-lg",children:[(0,t.jsx)("div",{className:"text-[11px] uppercase tracking-[0.18em] text-gray-400",children:"Your points"}),(0,t.jsx)("div",{className:"text-lg font-bold text-emerald-400",children:j})]}),(0,t.jsx)("button",{onClick:()=>h.current?.setView(n,13,{animate:!0}),className:"px-4 py-2 bg-emerald-600 rounded-lg shadow hover:bg-emerald-700 duration-200 transition text-sm font-semibold",children:"Reset view"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-2",children:(0,t.jsxs)("div",{className:"rounded-2xl overflow-hidden border border-[#1d332e] shadow-[0_0_30px_rgba(15,23,42,0.9)] relative bg-slate-900/80 backdrop-blur-xl",children:[g&&(0,t.jsxs)("div",{className:"absolute inset-0 bg-[#020617]/80 flex flex-col items-center justify-center gap-2 animate-pulse z-10",children:[(0,t.jsx)("div",{className:"w-10 h-10 border-4 border-emerald-500 border-t-transparent rounded-full animate-spin"}),(0,t.jsx)("span",{className:"text-sm text-gray-300",children:"Loading map..."})]}),(0,t.jsx)("div",{ref:e,style:{height:"700px",width:"100%"}})]})}),(0,t.jsxs)("aside",{className:"bg-[#020617]/90 border border-[#1e293b] rounded-2xl p-4 shadow-xl backdrop-blur-xl",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-emerald-50",children:["Quests (",P.length,")"]}),(0,t.jsx)("span",{className:"text-[11px] text-gray-400",children:z})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-300 mb-3",children:[(0,t.jsx)("label",{children:"Filter by type"}),(0,t.jsxs)("select",{value:C.type,onChange:e=>w(t=>({...t,type:e.target.value})),className:"w-full mt-1 px-2 py-1 bg-[#1e293b] text-gray-200 rounded outline-none focus:ring-2 focus:ring-emerald-500",children:[(0,t.jsx)("option",{value:"toate",children:"All"}),(0,t.jsx)("option",{value:"salubritate",children:"Cleaning / Sanitation"}),(0,t.jsx)("option",{value:"ecologizare",children:"Eco-actions"}),(0,t.jsx)("option",{value:"deseuri",children:"Waste dumping"})]}),(0,t.jsx)("label",{className:"mt-3 block",children:"Filter by priority"}),(0,t.jsxs)("select",{value:C.priority,onChange:e=>w(t=>({...t,priority:e.target.value})),className:"w-full mt-1 px-2 py-1 bg-[#1e293b] text-gray-200 rounded outline-none focus:ring-2 focus:ring-emerald-500",children:[(0,t.jsx)("option",{value:"toate",children:"All"}),(0,t.jsx)("option",{value:"mare",children:"High"}),(0,t.jsx)("option",{value:"medie",children:"Medium"}),(0,t.jsx)("option",{value:"mică",children:"Low"})]})]}),(0,t.jsx)("ul",{className:"space-y-2 max-h-[500px] overflow-y-auto pr-1",children:P.map(e=>{let i,r,s,n,a=e.status??"pending",l="finished"===a,d=(r=Math.floor((i=Math.floor(Math.max(0,"accepted"===a&&e.acceptedAt?108e5-(k-e.acceptedAt):108e5)/1e3))/3600),s=Math.floor(i%3600/60),n=e=>e.toString().padStart(2,"0"),`${n(r)}:${n(s)}:${n(i%60)}`);return(0,t.jsx)("li",{onClick:()=>{let t;(t=c.current.find(t=>t.id===e.id))&&h.current&&(h.current.setView(t.marker.getLatLng(),16,{animate:!0}),t.marker.openPopup(),b(e))},className:`bg-[#1e293b] px-3 py-3 rounded-xl cursor-pointer hover:bg-[#243045] transition ${l?"border border-emerald-500":""}`,children:(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:o(e.priority)}})}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsx)("h3",{className:"text-white text-sm font-semibold",children:e.title}),(0,t.jsxs)("span",{className:"text-[10px] text-gray-400",children:["#",e.id]})]}),(0,t.jsx)("p",{className:"text-[12px] text-gray-300 mt-1",children:e.desc}),(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between text-[11px] text-gray-400",children:[(0,t.jsxs)("span",{children:["Difficulty:"," ","★".repeat(e.difficulty).padEnd(3,"☆")]}),(0,t.jsxs)("span",{className:"text-emerald-400 font-semibold",children:["+",e.points," pts"]})]}),"pending"===a&&(0,t.jsxs)("div",{className:"mt-3 flex justify-end gap-2",children:[(0,t.jsx)("button",{className:"px-3 py-1 rounded-lg text-xs font-semibold bg-emerald-600 hover:bg-emerald-700 text-white",onClick:t=>{var i;t.stopPropagation(),i=e.id,m(e=>e.map(e=>e.id===i?{...e,status:"accepted",acceptedAt:e.acceptedAt??Date.now()}:e))},children:"Accept quest"}),(0,t.jsx)("button",{className:"px-3 py-1 rounded-lg text-xs font-semibold bg-[#111827] hover:bg-[#1f2937] text-gray-200",onClick:t=>{var i;t.stopPropagation(),i=e.id,m(e=>{let t=e.filter(e=>e.id!==i);if(p.current.length>0){let[e,...i]=p.current;return p.current=i,[...t,e]}return t})},children:"Reject"})]}),"accepted"===a&&(0,t.jsxs)("div",{className:"mt-3 flex flex-col gap-2 text-xs text-gray-300",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("span",{children:["Time left: ",d]})}),(0,t.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("span",{className:"px-3 py-1 rounded-lg bg-[#111827] text-gray-200",children:"Upload proof photo"}),(0,t.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:t=>{var i;t.stopPropagation(),t.target.files&&t.target.files[0]&&(i=e.id,m(e=>e.map(e=>e.id===i?{...e,hasImage:!0}:e)))}})]}),(0,t.jsx)("button",{className:`px-3 py-1 rounded-lg text-xs font-semibold bg-emerald-600 text-white ${!e.hasImage?"opacity-50 cursor-not-allowed":"hover:bg-emerald-700"}`,disabled:!e.hasImage,onClick:t=>{t.stopPropagation(),e.hasImage&&A(e.id)},children:"Finish quest"})]})]}),l&&(0,t.jsxs)("div",{className:"mt-3 text-xs text-emerald-400 font-semibold",children:["Quest completed ✅ You earned ",e.points," points!"]})]})]})},e.id)})})]})]})]}),(0,t.jsx)("div",{className:"mt-30 w-full",children:(0,t.jsxs)("div",{className:"bg-[#020617]/90 border border-[#1e293b] rounded-2xl p-6 shadow-xl max-w-7xl mx-auto backdrop-blur-xl",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-emerald-50 mb-6",children:"General statistics — Timișoara (current set of 10 quests)"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"bg-[#1e293b] rounded-xl p-4 flex flex-col gap-1 shadow-md",children:[(0,t.jsx)("span",{className:"text-gray-400 text-sm",children:"Total quests"}),(0,t.jsx)("span",{className:"text-2xl font-bold text-white",children:_.length})]}),(0,t.jsxs)("div",{className:"bg-[#1e293b] rounded-xl p-4 flex flex-col gap-1 shadow-md",children:[(0,t.jsx)("span",{className:"text-gray-400 text-sm",children:"High-priority quests"}),(0,t.jsx)("span",{className:"text-2xl font-bold text-red-400",children:_.filter(e=>"mare"===e.priority).length})]}),(0,t.jsxs)("div",{className:"bg-[#1e293b] rounded-xl p-4 flex flex-col gap-1 shadow-md",children:[(0,t.jsx)("span",{className:"text-gray-400 text-sm",children:"Average resolution time (estimate)"}),(0,t.jsx)("span",{className:"text-2xl font-bold text-yellow-400",children:"~ 3.4 days"})]}),(0,t.jsxs)("div",{className:"bg-[#1e293b] rounded-xl p-4 flex flex-col gap-1 shadow-md",children:[(0,t.jsx)("span",{className:"text-gray-400 text-sm",children:"Most affected zones (current set)"}),Object.entries(_.reduce((e,t)=>{let i=`${t.pos.lat.toFixed(2)}, ${t.pos.lng.toFixed(2)}`;return e[i]=(e[i]||0)+1,e},{})).sort((e,t)=>t[1]-e[1]).slice(0,3).map(([e,i])=>(0,t.jsxs)("span",{className:"text-[13px] text-gray-300",children:["• Zone ",e," — ",i," quests"]},e))]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10 mt-10",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("span",{className:"text-gray-300 mb-3 font-medium",children:"Overall distribution"}),(0,t.jsxs)("div",{className:"relative w-40 h-40",children:[(0,t.jsx)("div",{className:"absolute inset-0 rounded-full border-[12px] border-green-400/40"}),(0,t.jsx)("div",{className:"absolute inset-0 rounded-full border-[12px] border-yellow-400/40 rotate-45"}),(0,t.jsx)("div",{className:"absolute inset-0 rounded-full border-[12px] border-red-400/40 rotate-90"}),(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-white text-xl font-bold",children:_.length})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-300 mb-3 font-medium block",children:"Quest priority split"}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("p",{className:"text-sm text-red-400",children:"High"}),(0,t.jsx)("div",{className:"h-3 bg-red-400/20 rounded",children:(0,t.jsx)("div",{className:"h-3 bg-red-400 rounded",style:{width:`${_.length?_.filter(e=>"mare"===e.priority).length/_.length*100:0}%`}})})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("p",{className:"text-sm text-yellow-400",children:"Medium"}),(0,t.jsx)("div",{className:"h-3 bg-yellow-400/20 rounded",children:(0,t.jsx)("div",{className:"h-3 bg-yellow-400 rounded",style:{width:`${_.length?_.filter(e=>"medie"===e.priority).length/_.length*100:0}%`}})})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("p",{className:"text-sm text-green-400",children:"Low"}),(0,t.jsx)("div",{className:"h-3 bg-green-400/20 rounded",children:(0,t.jsx)("div",{className:"h-3 bg-green-400 rounded",style:{width:`${_.length?_.filter(e=>"mică"===e.priority).length/_.length*100:0}%`}})})]})]})]})]})}),(0,t.jsx)(d,{problems:_}),(0,t.jsx)("style",{children:`
        .marker-wrapper {
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .marker-pulse {
          width: 14px;
          height: 14px;
          border-radius: 50%;
          animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
          0% { box-shadow: 0 0 0 0 rgba(74, 222, 128, .5); }
          70% { box-shadow: 0 0 0 10px rgba(74, 222, 128, 0); }
          100% { box-shadow: 0 0 0 0 rgba(74, 222, 128, 0); }
        }

        .popup-card {
          background: #0f172a;
          padding: 10px;
          border-radius: 10px;
          color: #e2f0e8;
        }
        .popup-title {
          font-weight: bold;
          font-size: 13px;
        }
        .popup-desc {
          font-size: 12px;
          margin-top: 4px;
        }
        .popup-meta {
          margin-top: 6px;
          display: flex;
          gap: 6px;
          font-size: 10px;
        }
        .popup-pill {
          background: #1e293b;
          padding: 3px 6px;
          border-radius: 999px;
        }
        .popup-id {
          margin-left: auto;
          color: #4ade80;
        }

        .leaflet-popup-content-wrapper {
          background: #0f172a !important;
          color: #e2f0e8 !important;
          border-radius: 14px !important;
          border: 1px solid #1e293b !important;
          box-shadow: 0 6px 20px rgba(0,0,0,0.45) !important;
        }
        .leaflet-popup-tip {
          background: #0f172a !important;
          border: 1px solid #1e293b !important;
        }
        .leaflet-popup-content {
          margin: 0 !important;
          padding: 0 !important;
        }

        .marker-cluster,
        .marker-cluster div,
        .marker-cluster span {
          background-image: none !important;
          box-shadow: none !important;
        }

        .marker-cluster {
          background: none !important;
          border: none !important;
        }

        .marker-cluster div {
          width: 40px !important;
          height: 40px !important;
          background: rgba(0, 153, 102, 0.35) !important;
          border-radius: 50% !important;
          border: 3px solid rgba(42, 117, 92, 0.45) !important;
          display: flex !important;
          justify-content: center !important;
          align-items: center !important;
          color: white !important;
          font-size: 16px !important;
          font-weight: 600 !important;
        }

        .marker-cluster span {
          line-height: 40px !important;
          font-size: 16px !important;
          color: white !important;
        }
      `})]})}e.s(["default",()=>h])},5481,e=>{e.n(e.i(65726))}]);