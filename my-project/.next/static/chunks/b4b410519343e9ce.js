(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,60176,e=>{"use strict";var r=e.i(43476),a=e.i(71645);function t(){let[e,t]=(0,a.useState)(""),[l,s]=(0,a.useState)(""),[d,o]=(0,a.useState)(!0),[n,i]=(0,a.useState)(!1),[c,x]=(0,a.useState)(null),[m,u]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/me");if(!e.ok)return void o(!1);let r=(await e.json()).user;r&&(t(r.username||""),s(r.avatarUrl||""))}catch(e){console.error("Error loading user in settings:",e)}finally{o(!1)}})()},[]);let p=async()=>{i(!0),x(null),u(null);try{let r=await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,avatarUrl:l})}),a=await r.json();r.ok?x("Profile updated successfully!"):u(a.error||"Failed to save profile.")}catch(e){console.error("Error saving profile:",e),u("Unexpected error.")}finally{i(!1)}};return d?(0,r.jsx)("div",{className:"min-h-screen bg-[#020617] text-white flex items-center justify-center",children:(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Loading profile settings…"})}):(0,r.jsx)("div",{className:"min-h-screen bg-[#020617] text-white px-6 py-10 flex justify-center",children:(0,r.jsxs)("div",{className:"w-full max-w-lg bg-[#020617] border border-[#1e293b] rounded-2xl p-6 shadow-xl",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Profile settings"}),(0,r.jsx)("p",{className:"text-xs text-gray-400 mb-6",children:"Customize your username and avatar. These will appear on leaderboards and your profile."}),(0,r.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-300 mb-1",children:"Username"}),(0,r.jsx)("input",{value:e,onChange:e=>t(e.target.value),placeholder:"@eco.hero",className:"w-full rounded-lg bg-[#020617] border border-[#1e293b] px-3 py-2 outline-none text-sm text-gray-100 placeholder:text-gray-500 focus:border-emerald-500"}),(0,r.jsx)("p",{className:"text-[11px] text-gray-500 mt-1",children:"3–20 characters. Unique across the platform."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-300 mb-1",children:"Avatar URL"}),(0,r.jsx)("input",{value:l,onChange:e=>s(e.target.value),placeholder:"https://example.com/avatar.png",className:"w-full rounded-lg bg-[#020617] border border-[#1e293b] px-3 py-2 outline-none text-sm text-gray-100 placeholder:text-gray-500 focus:border-emerald-500"}),(0,r.jsx)("p",{className:"text-[11px] text-gray-500 mt-1",children:"For now, paste an image URL. (Later you can add an upload system.)"})]}),l&&(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("p",{className:"text-[11px] text-gray-400 mb-1",children:"Avatar preview:"}),(0,r.jsx)("div",{className:"w-16 h-16 rounded-xl overflow-hidden border border-[#1e293b]",children:(0,r.jsx)("img",{src:l,alt:"Avatar preview",className:"w-full h-full object-cover"})})]})]}),m&&(0,r.jsx)("p",{className:"mt-4 text-xs text-red-400 bg-red-950/30 border border-red-900/60 rounded-md px-3 py-2",children:m}),c&&(0,r.jsx)("p",{className:"mt-4 text-xs text-emerald-300 bg-emerald-950/30 border border-emerald-900/60 rounded-md px-3 py-2",children:c}),(0,r.jsx)("button",{onClick:p,disabled:n,className:`mt-6 w-full py-2.5 rounded-full text-sm font-semibold 
            bg-emerald-600 hover:bg-emerald-500 transition 
            disabled:opacity-50 disabled:cursor-not-allowed`,children:n?"Saving…":"Save changes"})]})})}e.s(["default",()=>t])}]);